<!doctype html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="description" content="Panel administrativo - AEFN">
        <meta name="author" content="AEFN">

        <title>Admin - AEFN</title>

        <!-- CSS FILES -->        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Open+Sans&display=swap" rel="stylesheet">
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-icons.css" rel="stylesheet">
        <link href="css/templatemo-topic-listing.css" rel="stylesheet">
        <link href="css/aefn-theme.css" rel="stylesheet">
        <link href="css/aefn-components.css" rel="stylesheet">
        <link href="css/aefn-overrides.css" rel="stylesheet">
        <link href="css/aefn-color-override.css" rel="stylesheet">

        <style>
            .admin-container {
                max-width: 1200px;
                margin: 0 auto;
            }
            .admin-section {
                margin-bottom: 2rem;
            }
            .form-section {
                background-color: #f8f9fa;
                padding: 1.5rem;
                border-radius: 8px;
                margin-bottom: 1.5rem;
            }
            .nav-tabs .nav-link {
                color: #6c757d;
            }
            .nav-tabs .nav-link.active {
                background-color: #f8f9fa;
                border-bottom: 3px solid var(--primary-color);
            }
            .data-table {
                font-size: 0.9rem;
            }
            .btn-action {
                padding: 0.25rem 0.5rem;
                font-size: 0.85rem;
                margin: 0.1rem;
            }
            .alert-info {
                background-color: #e7f3ff;
                border-color: #b3d9ff;
                color: #004085;
            }
        </style>
    </head>
    
    <body id="top">
        <main>
            <nav class="navbar navbar-expand-lg">
                <div class="container">
                    <a class="navbar-brand" href="index.html">
                        <i class="bi-atom"></i>
                        <span>AEFN - Admin</span>
                    </a>

                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-lg-5 me-lg-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Volver al sitio</a>
                            </li>
                        </ul>

                        <div class="d-flex align-items-center gap-2">
                            <button class="btn btn-outline-danger btn-sm" id="logoutBtn">
                                <i class="bi-box-arrow-left me-1"></i> Salir
                            </button>
                        </div>
                    </div>
                </div>
            </nav>

            <section class="section-padding">
                <div class="container admin-container">
                    <!-- Verificaci√≥n de sesi√≥n -->
                    <div id="loginContainer" class="row mb-4" style="display:none;">
                        <div class="col-lg-6 col-12 mx-auto">
                            <div class="custom-block bg-white shadow-lg p-4">
                                <h3 class="mb-4">Acceso Administrativo</h3>
                                <form id="loginForm">
                                    <div class="mb-3">
                                        <label for="adminPassword" class="form-label">Contrase√±a</label>
                                        <input type="password" class="form-control" id="adminPassword" required>
                                    </div>
                                    <button type="submit" class="btn custom-btn w-100">Ingresar</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Panel Admin (oculto hasta autenticaci√≥n) -->
                    <div id="adminPanel" style="display:none;">
                        <div class="row mb-4">
                            <div class="col-12">
                                <h2 class="mb-3">Panel de Administraci√≥n</h2>
                                
                                <!-- Panel de Permisos -->
                                <div class="custom-block bg-light p-3 mb-4">
                                    <h5 class="mb-3"><i class="bi-shield-lock me-2"></i>Permisos de Agregar Entradas</h5>
                                    <p class="small text-muted mb-3">Activa/desactiva los botones de agregar en cada p√°gina</p>
                                    
                                    <div class="row">
                                        <div class="col-md-6 col-lg-4 mb-2">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input permission-toggle" type="checkbox" id="perm-clubes" data-zone="clubes">
                                                <label class="form-check-label" for="perm-clubes">
                                                    Agregar Clubes
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-4 mb-2">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input permission-toggle" type="checkbox" id="perm-eventos" data-zone="eventos">
                                                <label class="form-check-label" for="perm-eventos">
                                                    Agregar Eventos
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-4 mb-2">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input permission-toggle" type="checkbox" id="perm-profesores" data-zone="profesores">
                                                <label class="form-check-label" for="perm-profesores">
                                                    Agregar Profesores
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-4 mb-2">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input permission-toggle" type="checkbox" id="perm-grupos" data-zone="grupos">
                                                <label class="form-check-label" for="perm-grupos">
                                                    Agregar Grupos de Investigaci√≥n
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-4 mb-2">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input permission-toggle" type="checkbox" id="perm-tesis" data-zone="tesis">
                                                <label class="form-check-label" for="perm-tesis">
                                                    Agregar Tesis
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-4 mb-2">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input permission-toggle" type="checkbox" id="perm-papers" data-zone="papers">
                                                <label class="form-check-label" for="perm-papers">
                                                    Agregar Papers
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <hr class="my-3">
                                    
                                    <div class="btn-group gap-2">
                                        <button class="btn btn-sm btn-outline-success" id="enableAllPerms">
                                            <i class="bi-check-all me-1"></i> Activar Todo
                                        </button>
                                        <button class="btn btn-sm btn-outline-danger" id="disableAllPerms">
                                            <i class="bi-x-circle me-1"></i> Desactivar Todo
                                        </button>
                                    </div>

                                    <div class="alert alert-info mt-3 mb-0 small">
                                        <i class="bi-info-circle me-2"></i>
                                        <strong>Atajo de teclado:</strong> Presiona <kbd>Alt</kbd> + <kbd>E</kbd> para toggle r√°pido
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="custom-block bg-white shadow-sm p-4 mt-4">
                            <h5 class="mb-4"><i class="bi-question-circle me-2"></i>¬øC√≥mo agregar nuevas entradas?</h5>
                            <p class="mb-3">Para agregar clubes, profesores, eventos o cualquier informaci√≥n, necesitas:</p>
                            <ol class="mb-3">
                                <li>Haz un bot√≥n "‚úö Agregar" en las p√°ginas</li>
                                <li>Abre el tutorial de c√≥mo hacer una Pull Request</li>
                                <li>Edita el archivo JSON correspondiente con los datos</li>
                                <li>Crea una Pull Request hacia el repositorio</li>
                                <li>Los cambios se aprobar√°n y publicar√°n autom√°ticamente</li>
                            </ol>
                            <div class="alert alert-info mb-0">
                                <i class="bi-info-circle me-2"></i>
                                <strong>Nota:</strong> Los botones "Agregar" se muestran/ocultan usando los controles arriba. Esto es solo para tu sesi√≥n.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Modal Tutorial PR -->
        <div class="modal fade" id="tutorialModal" tabindex="-1" aria-labelledby="tutorialTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="tutorialTitle">
                            <i class="bi-git me-2"></i>C√≥mo Agregar Nuevas Entradas
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p class="lead">Sigue estos pasos para agregar nuevas entradas al sitio:</p>
                        
                        <div class="accordion" id="tutorialAccordion">
                            <!-- Paso 1 -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#paso1">
                                        1. Bifurcar (Fork) el Repositorio
                                    </button>
                                </h2>
                                <div id="paso1" class="accordion-collapse collapse show" data-bs-parent="#tutorialAccordion">
                                    <div class="accordion-body">
                                        <ol>
                                            <li>Ve a <a href="https://github.com/DaVas1410/web_aefn" target="_blank">GitHub - web_aefn</a></li>
                                            <li>Haz clic en el bot√≥n <strong>"Fork"</strong> (arriba a la derecha)</li>
                                            <li>Se crear√° una copia del repositorio en tu cuenta</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>

                            <!-- Paso 2 -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#paso2">
                                        2. Editar el Archivo JSON
                                    </button>
                                </h2>
                                <div id="paso2" class="accordion-collapse collapse" data-bs-parent="#tutorialAccordion">
                                    <div class="accordion-body">
                                        <p><strong>Ubica el archivo a editar en tu fork:</strong></p>
                                        <ul>
                                            <li><code>data/clubes.json</code> ‚Üí para agregar clubes</li>
                                            <li><code>data/profesores.json</code> ‚Üí para agregar profesores</li>
                                            <li><code>data/events.json</code> ‚Üí para agregar eventos</li>
                                            <li><code>data/investigation-groups.json</code> ‚Üí para grupos de investigaci√≥n</li>
                                            <li><code>data/theses.json</code> ‚Üí para tesis</li>
                                            <li><code>data/papers.json</code> ‚Üí para papers</li>
                                        </ul>
                                        <p><strong>Haz clic en el l√°piz</strong> <i class="bi-pencil"></i> para editar</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Paso 3 -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#paso3">
                                        3. Agregar tu Entrada
                                    </button>
                                </h2>
                                <div id="paso3" class="accordion-collapse collapse" data-bs-parent="#tutorialAccordion">
                                    <div class="accordion-body">
                                        <p><strong>Ejemplo para agregar un club en <code>data/clubes.json</code>:</strong></p>
                                        <pre><code class="bg-light p-2">{
  "id": "tu-club",
  "nombre": "Nombre del Club",
  "descripcion": "Descripci√≥n corta",
  "descripcion_larga": "Descripci√≥n m√°s detallada...",
  "icono": "bi-stars",
  "contacto_email": "contacto@ejemplo.com"
}</code></pre>
                                        <p class="small text-muted mt-2">Copia el formato de otro club y edita los valores</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Paso 4 -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#paso4">
                                        4. Guardar Cambios
                                    </button>
                                </h2>
                                <div id="paso4" class="accordion-collapse collapse" data-bs-parent="#tutorialAccordion">
                                    <div class="accordion-body">
                                        <ol>
                                            <li>Despl√°zate al final de la p√°gina</li>
                                            <li>En <strong>"Commit changes"</strong>, escribe un mensaje descriptivo:
                                                <br><code>feat: Agregar nuevo club "Mi Club"</code>
                                            </li>
                                            <li>Selecciona <strong>"Create a new branch"</strong></li>
                                            <li>Haz clic en <strong>"Commit changes"</strong></li>
                                        </ol>
                                    </div>
                                </div>
                            </div>

                            <!-- Paso 5 -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#paso5">
                                        5. Crear una Pull Request (PR)
                                    </button>
                                </h2>
                                <div id="paso5" class="accordion-collapse collapse" data-bs-parent="#tutorialAccordion">
                                    <div class="accordion-body">
                                        <ol>
                                            <li>Vuelve a tu repositorio fork</li>
                                            <li>Ver√°s un bot√≥n <strong>"Compare & pull request"</strong></li>
                                            <li>Haz clic en √©l</li>
                                            <li>Revisa que los cambios sean correctos</li>
                                            <li>Haz clic en <strong>"Create pull request"</strong></li>
                                        </ol>
                                        <p class="small text-muted mt-2">Tu PR ser√° revisada y aprobada ‚úÖ</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Paso 6 -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#paso6">
                                        ‚úÖ ¬°Listo! Tu cambio est√° publicado
                                    </button>
                                </h2>
                                <div id="paso6" class="accordion-collapse collapse" data-bs-parent="#tutorialAccordion">
                                    <div class="accordion-body">
                                        <p>Una vez que el administrador aprueba tu PR, los cambios se publican autom√°ticamente en GitHub Pages.</p>
                                        <p><strong>¬°Tu nueva entrada aparecer√° en el sitio web! üéâ</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info mt-4 mb-0">
                            <i class="bi-info-circle me-2"></i>
                            <strong>¬øNecesitas ayuda?</strong> 
                            <a href="https://docs.github.com/es/get-started/using-git" target="_blank">Aprende m√°s sobre Git y GitHub</a>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <a href="https://github.com/DaVas1410/web_aefn" target="_blank" class="btn custom-btn">
                            <i class="bi-github me-1"></i>Ir al Repositorio
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <footer class="site-footer section-padding mt-5">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <p class="copyright-text">Copyright ¬© 2025 AEFN - Panel Administrativo</p>
                    </div>
                </div>
            </div>
        </footer>

        <!-- JAVASCRIPT FILES -->
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/validators.js"></script>
        <script src="js/admin.js"></script>
    </body>
</html>
